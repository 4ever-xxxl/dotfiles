# ~/.tmux.conf

#=============================================================================
# 全局选项 (Global Options)

#=============================================================================

# 1. 基础设置
#-----------------------------------------------------------------------------
# [-] 将前缀键由 C-b 改为 C-a (Ctrl+a)
# C-a 更顺手，且不容易与其它程序冲突
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix


# [-] 开启鼠标支持 (Tmux 2.1+)

# 允许使用鼠标选择窗格、调整大小、滚动等
set -g mouse on

# [-] 设置更长的历史记录行数
set -g history-limit 10000

# [-] 设置终端颜色为 256 色，以获得更好的视觉体验
set -g default-terminal "screen-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# [-] 降低命令响应延迟，使操作更流畅

set -sg escape-time 0



#=============================================================================

# 键位绑定 (Key Bindings)
#=============================================================================
# 您现在的前缀键是 `Ctrl + a`

# 1. 窗口与窗格操作
#-----------------------------------------------------------------------------
# [-] 使用 | 和 - 分割窗口，并在当前目录下创建
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# [-] 使用 r 键重载配置文件，无需重启 tmux
bind r source-file ~/.tmux.conf \; display "配置已重载！"

# [-] 使用 Vim 的 HJKL 键在窗格间切换
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R


# [-] 使用 < 和 > 调整窗口大小
bind -r < resize-pane -L 5
bind -r > resize-pane -R 5
bind -r - resize-pane -D 5
bind -r + resize-pane -U 5

# [-] 关闭窗格和窗口的确认提示
bind-key x kill-pane
bind-key & kill-window



# 2. 复制模式
#-----------------------------------------------------------------------------
# [-] 使用 Vim 键位进行复制模式操作
set-window-option -g mode-keys vi


# [-] `v` 开始选择，`y` 复制到系统剪贴板
# 需要安装 xsel 或 xclip (Linux) / pbcopy (macOS)
bind-key -T copy-mode-vi 'v' send-keys -X begin-selection
bind-key -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel 'xclip -in -selection clipboard'



#=============================================================================

# 外观与状态栏 (Appearance & Status Bar)
#=============================================================================

# 1. 颜色与主题
#-----------------------------------------------------------------------------
# [-] 状态栏颜色

set -g status-style 'bg=#333333,fg=#AAAAAA'

# [-] 窗口列表颜色
set-window-option -g window-status-style 'fg=#888888'
set-window-option -g window-status-current-style 'fg=#FFFFFF,bg=#222222'

# [-] 窗格边框颜色

set -g pane-border-style 'fg=#555555'
set -g pane-active-border-style 'fg=#FFFFFF'


# 2. 状态栏内容
#-----------------------------------------------------------------------------
# [-] 左侧状态栏：会话名称
set -g status-left '#[fg=green]S:#S #[fg=white]| '


# [-] 右侧状态栏：日期、时间、电量（可选）
set -g status-right '#[fg=cyan]%Y-%m-%d %H:%M '


# [-] 状态栏居中显示窗口列表

set -g status-justify centre

# [-] 更新状态栏的频率（秒）
set -g status-interval 1



#=============================================================================
# 插件管理 (Plugin Management) - TPM
#=============================================================================
# TPM (Tmux Plugin Manager) 是管理插件的最佳方式

# [-] 插件列表
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible' # 基础优化
set -g @plugin 'tmux-plugins/tmux-resurrect' # 保存/恢复会话
set -g @plugin 'tmux-plugins/tmux-continuum' # 自动保存/恢复
set -g @plugin 'dracula/tmux' # Dracula 主题（可替换）
# set -g @plugin 'tmux-plugins/tmux-yank' # 增强复制功能

# [-] Dracula 主题配置 (如果使用)
set -g @dracula-plugins "cpu-usage ram-usage"
set -g @dracula-show-powerline true
set -g @dracula-show-left-icon session


# [-] 自动恢复设置
set -g @continuum-restore 'on'


# [-] 初始化 TPM (必须放在配置文件的最后)
run '~/.tmux/plugins/tpm/tpm'
